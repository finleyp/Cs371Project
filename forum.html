<!DOCTYPE html>
<html lang="en-US">

<html>

<head>
  <meta charset="UTF-8" />
  <link rel='stylesheet' type='text/css' href='stylesheet.css' />
  <script src="https://www.gstatic.com/firebasejs/5.5.8/firebase.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <meta name="google-signin-client_id" content="cis-371-forum.apps.googleusercontent.com">
  </meta>
  <script src="https://apis.google.com/js/platform.js" async defer></script>

  <!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>-->
  <!--<script src="onready.js"></script>-->
  <script src="app.js"></script>
  <title>CIS371 Forum</title>
</head>

<body>
  <div id="app">
    <div class="navBar">
      <p>{{ title }}</p>
    </div>
    <div class="searchBar">
      <input v-model="searchInput" class="searchInput" placeholder="Seach">
      <!-- <v-btn id="search-button" @click="searchForums">Search</v-btn> -->
      <v-btn id="search-button" depressed small round color="grey" @click="searchForums">
        <v-icon dark>search</v-icon>
      </v-btn>
      <v-btn id="login-button" depressed small round color="grey" @click="logToggle">
        <v-icon dark>person</v-icon>
      </v-btn>
    </div>

    <v-btn @click="forumPost">New Post</v-btn>
    <div id="new-forum" class="hidden">

      <v-container fill-height red darken-2>
        <v-layout id="titleEntry" row>
          <v-container fluid grey lighten-2>
            <h3>Title: {{ postTitle }}</h3>
            <input v-model="postTitle" class="userInput" placeholder="Enter title">
            <br><br>
            <textarea v-model="postBody" class="userInput" placeholder="Enter body"></textarea>
            <!--<v-btn id="submit-button" @click="submitForumPost" disabled>Submit</v-btn>-->
            <v-btn id="submit-button" @click="submitForumPost">Submit</v-btn>
            <v-btn @click="cancelForumPost">Cancel</v-btn>
          </v-container>
        </v-layout>
      </v-container>
    </div>

  </div>

  <div id="results-div" class="hidden">
    <br>
    <h2 class="results-h">Results</h2>
    <hr><br>
    <table id="results-table">
      <tr>
        <th>Title</th>
        <th>Body</th>
      </tr>
    </table>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify/dist/vuetify.js"></script>
  <script>
    new Vue({
      el: '#app',
      data: {
        title: "FORUM.RS",
        postTitle: '',
        postBody: '',
        searchInput: '',
        email: '',
        password: ''
      },
      methods: {
        forumPost() {
          var forumDiv = document.getElementById("new-forum");
          // TODO: Hide all other divs with elements that need to be hidden.
          forumDiv.classList.remove('hidden');
        },
        submitForumPost() {
          if (this.postTitle.length > 0 && this.postBody.length != 0) {
            console.log("Good to go");
            submitPost(this.postTitle, this.postBody);
            this.cancelForumPost();
          }
        },
        cancelForumPost() {
          this.postTitle = '';
          this.postBody = '';
          var forumDiv = document.getElementById("new-forum");
          forumDiv.classList.add('hidden');
        },
        searchForums() {
          searchForForum(this.searchInput);
        },
        logToggle(){
          if(loggedIn()){
            console.log("sign out");
            firebaseLogOut();
          }else{
            console.log("sign in");
            googleAuth();
          }
        }

      }
    })
  </script>
</body>

</html>